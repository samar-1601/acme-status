// lib
import { useSession } from "next-auth/react";
import Head from "next/head";

// components
import { Block } from "baseui/block";
import { Spinner } from "baseui/spinner";
import WelcomePage from "../components/welcomePage/WelcomePage";
import LandingPage from "../components/landingPage/LandingPage";
// import { ClientsHomePage } from "../components/incidents/client-incident-view/ClientHomePage";

// styles
import { LOADER_OVERRIDES } from "../components/incidents/list/overrides/listStyles";
import { useEffect } from "react";

// constants
// import { PAGE_NAME } from "../constants";

const Home = () => {
  const { data: session, status } = useSession(); // get user's session details
  useEffect(() => {
    if (session && !localStorage.getItem("isSideBarOpen"))
      localStorage.setItem("isSideBarOpen", "true");
  }, []);

  // if status not confirmed
  if (status === "loading") {
    return (
      <Block overrides={LOADER_OVERRIDES}>
        <Spinner />
      </Block>
    );
  }

  // is user not logged in redirect to welcome page
  if (!session) return <WelcomePage />;

  // if logged in, take to Landing Page
  return (
    <>
      <Head>
        <title>Status App</title>
        {/* <title>{PAGE_NAME} Status</title> */} 
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link
          href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap"
          rel="stylesheet"
        />
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/Status_icon.png" />
      </Head>
      <LandingPage />
        {/* <link rel="icon" href="/titleIcon.png" />
      </Head>
      <ClientsHomePage /> */}
    </>
  );
};

export default Home;
